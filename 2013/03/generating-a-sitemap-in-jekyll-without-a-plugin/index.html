<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width" name="viewport"><link href="//www.google-analytics.com" rel="dns-prefetch"><title>Generating a Sitemap in Jekyll without a Plugin &ndash; Development, design, and more by David Ensinger</title><meta content="Generating a Sitemap in Jekyll without a Plugin" property="og:title"><meta content="Generating a Sitemap in Jekyll without a Plugin" name="twitter:title"><meta content="Development, design, and more by David Ensinger" property="og:site_name"><meta content="A guide to generating a sitemap.xml in Jekyll without using a plugin." name="description"><meta content="A guide to generating a sitemap.xml in Jekyll without using a plugin." property="og:description"><meta content="A guide to generating a sitemap.xml in Jekyll without using a plugin." name="twitter:description"><meta content="David Ensinger" name="author"><link href="https://plus.google.com/111951762509840042073/posts" rel="author"><meta content="@DavidEnsinger" name="twitter:site"><meta content="@DavidEnsinger" name="twitter:creator"><link href="/atom.xml" rel="alternate" title="Atom" type="application/atom+xml"><link href="/sitemap.xml" rel="sitemap" title="Sitemap" type="application/xml"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="/favicon-152x152.6de0.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon-144x144.3a8b.png"><link rel="apple-touch-icon-precomposed" sizes="120x120" href="/favicon-120x120.1728.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="/favicon-114x114.cec0.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="/favicon-76x76.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="/favicon-72x72.50eb.png"><link rel="apple-touch-icon-precomposed" href="/favicon-57x57.3852.png"><link rel="shortcut icon" sizes="196x196" href="/favicon-196x196.5185.png"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="/favicon-144x144-ie10.4773.png"><meta name="msapplication-square70x70logo" content="/favicon-128x128-ie11.a5f9.png"/><meta name="msapplication-square150x150logo" content="/favicon-270x270-ie11.b0ac.png"/><meta name="msapplication-wide310x150logo" content="/favicon-558x270-ie11.af00.png"/><meta name="msapplication-square310x310logo" content="/favicon-558x558-ie11.ab0a.png"/><link rel="shortcut icon" href="/favicon.ico"><link href="http://davidensinger.com/2013/03/generating-a-sitemap-in-jekyll-without-a-plugin/" rel="canonical"><meta content="article" property="og:type"><meta content="summary" name="twitter:card"><meta content="http://davidensinger.com/2013/03/generating-a-sitemap-in-jekyll-without-a-plugin/" property="og:url"><meta content="http://davidensinger.com/2013/03/generating-a-sitemap-in-jekyll-without-a-plugin/" name="twitter:url"><meta content="2013-03-29T06:26:00-04:00" property="article:published_time"><meta content="http://davidensinger.com/about/" property="article:author"><meta property="og:image" content="http://davidensinger.com/img/logo-high-resolution.8a8a.png"><meta name="twitter:image:src" content="http://davidensinger.com/img/logo-high-resolution.8a8a.png"><meta property="article:tag" content="Jekyll"><meta property="article:tag" content="Sitemap"><meta property="article:tag" content="XML"><link rel="stylesheet" href="/css/styles.644b.css"><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-26697016-1","auto"),ga("send","pageview");</script></head><body class="page-post"><div class="outer-container"><div class="inner-container clearfix"><header class="site-header clearfix" role="banner"><a class="site-logo" href="/"><svg class="svg-logo" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 112 118"><style>.blue{fill-rule:evenodd;fill:#2f93d5}.blue:hover{fill:#2782bf}.green{fill-rule:evenodd;fill:#35c06a}.green:hover{fill:#2fac5f}.orange{fill-rule:evenodd;fill:#f57a00}.orange:hover{fill:#db6d00}.yellow{fill-rule:evenodd;fill:#f5c500}.yellow:hover{fill:#dbb000}.red{fill-rule:evenodd;fill:#ff330f}.red:hover{fill:#f02400}</style><path d="M108.42 51.169c7.437-18.641-1.529-33.691-16.437-42.462 c4.004 3.9 6.8 8.7 8.3 14.213c2.287 8.5 1 17.548-1.928 25.729c-2.241 6.215-5.712 12.124-9.616 17.4 c-5.311 7.223-12.061 14.224-19.256 19.59c-1.394 1.04-3.341 2.412-5.492 3.661C79.032 84.5 101.5 68.6 108.4 51.169z" class="blue"/><path d="M103.921 95.776c0.086-0.303 0.147-0.615 0.147-0.945 c0-1.91-1.558-3.468-3.469-3.468c-0.581 0-1.12 0.157-1.603 0.411c-2.118-1.984-4.956-3.212-8.077-3.212 c-3.724 0-7.05 1.738-9.224 4.44c-0.995-0.401-2.078-0.628-3.214-0.628c-4.761 0-8.643 3.882-8.643 8.6 c0 4.8 3.9 8.6 8.6 8.642c1.438 0 2.792-0.359 3.986-0.984c2.151 2.2 5.1 3.6 8.5 3.6 c3.889 0 7.34-1.899 9.5-4.809c0.818 0.4 1.7 0.6 2.7 0.633c3.4 0 6.174-2.773 6.174-6.175 C109.296 98.8 106.9 96.2 103.9 95.776z" class="blue"/><path d="M23.485 69.735c-0.441 0-0.872 0.046-1.29 0.1 c-1.672-2.691-4.647-4.496-8.038-4.496c-3.985 0-7.401 2.487-8.793 5.985c-0.184-0.05-0.373-0.086-0.572-0.086 c-1.202 0-2.183 0.98-2.183 2.183c0 0.2 0 0.3 0.1 0.502C1.098 74.7 0 76.3 0 78.2 c0 2.6 2.1 4.8 4.8 4.757c1.164 0 2.219-0.438 3.047-1.137c1.683 1.5 3.9 2.5 6.4 2.5 c2.234 0 4.288-0.785 5.91-2.087c1.003 0.6 2.2 0.9 3.4 0.948c3.697 0 6.711-3.015 6.711-6.711 S27.182 69.7 23.5 69.735z" class="blue"/><path d="M82.17 4.448c13.336 6.3 21.8 21.8 14 43.4 c-7.087 19.661-28.238 38.898-39.001 42.171c0.355-0.38 0.677-0.756 0.952-1.084c2.135-2.54 4.052-5.511 5.774-8.343 c2.375-3.904 4.56-7.952 6.591-12.044c2.306-4.646 4.43-9.398 6.329-14.226c1.369-3.482 2.625-7.015 3.718-10.594 c2.763-9.052 5.276-20.265 4.421-29.789C84.678 11 83.9 7.3 82.2 4.448z" class="green"/><path d="M48.969 87.861c-7.685-8.215-16.383-35.451-12.69-56.021 C40.348 9.2 55.4 0 70.1 1.218c-2.933 1.548-5.433 4.395-7.17 6.862c-5.503 7.82-8.932 18.789-11.065 28 c-0.844 3.646-1.522 7.333-2.077 11.034c-0.769 5.13-1.305 10.307-1.632 15.484c-0.287 4.56-0.419 9.157-0.314 13.7 c0.076 3.3 0.2 6.8 0.8 10.112C48.761 86.9 48.9 87.4 49 87.861z" class="orange"/><path d="M52.707 90.296c-3.32-0.89-3.95-30.304 1.455-53.665 C60.024 11.3 69.6 0.5 76.3 2.323c6.66 1.8 9.6 15.9 2 40.771C71.28 66 56 91.2 52.7 90.296z" class="yellow"/><path d="M40.468 77.893c-3.548-8.245-5.894-17.683-6.881-26.593 c-0.726-6.552-0.778-13.403 0.389-19.907c1.536-8.559 4.96-17.02 11.195-23.246C49.193 4.1 54.1 1.4 59.5 0 C42.192 0.1 26.9 8.7 24 28.555c-2.691 18.6 8.8 43.6 19.4 55.254C42.155 81.7 41.2 79.5 40.5 77.893z" class="red"/><path d="M58.43 93.895c-3.712 4.672-4.875 8.223-6.772 8.6 c-0.691 0.131-1.454 0.068-2.175-0.146c-0.732-0.174-1.424-0.502-1.957-0.96c-1.464-1.259-0.695-4.915-1.575-10.817 c-2.291 22.869-4.02 1.177-7.362-8.434c1.192 8.9 2.5 15.6 1.7 22.676c-0.763 7.059-3.679 8.8 3.3 10.672l4.36 1.2 c6.967 1.9 5.315-1.104 8.183-7.598c2.868-6.494 7.355-11.625 12.854-18.764C61.322 96.9 49 114.8 58.4 93.895z" class="red"/></svg></a><nav class="main-navigation" role="navigation"><h1 class="visuallyhidden">Menu</h1><div class="visuallyhidden"><a href="#content" title="Skip to content">Skip to content</a></div><ul><li><a class="nav-home" href="/">Home</a></li><li><a class="nav-about" href="/about/">About</a></li></ul></nav></header><div class="primary" id="content" role="main"><article class="post hentry clearfix"><header class="entry-header"><h1 class="entry-title">Generating a Sitemap in Jekyll without a Plugin</h1><div class="entry-meta entry-meta-header"><span class="icon-left entry-meta-icon icon-entry-date"><time class="date updated" datetime="2013-03-29T06:26:00-04:00">March 29, 2013</time></span></div></header><div class="entry-content"><p>During my switch from <strong>WordPress</strong> to <strong>Jekyll</strong>, I decided to simplify the scope of my site. One of the changes I made was to remove my portfolio, as I’d like to put more of an emphasis on my writing than on my past projects. As a result, I culled many pages that were indexed by search engines. This meant that I needed a proper <strong>sitemap.xml</strong>, principally for use with Google’s <a href="www.google.com/webmasters/tools">Webmaster Tools</a>.</p><div class="red-box"><p><strong>Please Note:</strong> I’ve since updated the configuration of my <strong>Sitemap.xml</strong>, which I’ve written about in <a href="http://davidensinger.com/2013/11/building-a-better-sitemap-xml-with-jekyll/">Building a Better Sitemap.xml with Jekyll</a>.</p></div><p>My initial thought was to find a plugin, but I then realized that wasn’t possible. I host the site on <strong>GitHub Pages</strong>, which runs Jekyll in <code>--safe</code> mode. This means that I can’t use any custom plugins and that precludes the implementation of the most popular plugin, which is the <a href="http://www.kinnetica.com/projects/jekyll-sitemap-generator/">Sitemap.xml Generator</a>.</p><p>One way around this limitation would be to generate the site locally with a source branch and then compile the pages on a master branch to push to GitHub. There are clear benefits to doing it this way, but for the time being I’d prefer to keep my site simple and let GitHub do the compiling.</p><p>My cursory search for a plugin-less solution led to this <a href="https://github.com/havvg/havvg.github.com/blob/master/sitemap.xml">sitemap.xml</a> by <a href="https://github.com/havvg">havvg</a>.</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;urlset</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span><span class="nt">&gt;</span>
  {% for post in site.posts %}
    <span class="nt">&lt;url&gt;</span>
      <span class="nt">&lt;loc&gt;</span>{{ site.url }}{{ post.url }}<span class="nt">&lt;/loc&gt;</span>
      {% if post.lastmod == null %}
        <span class="nt">&lt;lastmod&gt;</span>{{ post.date | date_to_xmlschema }}<span class="nt">&lt;/lastmod&gt;</span>
      {% else %}
        <span class="nt">&lt;lastmod&gt;</span>{{ post.lastmod | date_to_xmlschema }}<span class="nt">&lt;/lastmod&gt;</span>
      {% endif %}
      <span class="nt">&lt;changefreq&gt;</span>weekly<span class="nt">&lt;/changefreq&gt;</span>
      <span class="nt">&lt;priority&gt;</span>1.0<span class="nt">&lt;/priority&gt;</span>
    <span class="nt">&lt;/url&gt;</span>
  {% endfor %}
  {% for page in site.pages %}
    {% if page.sitemap != null and page.sitemap != empty %}
      <span class="nt">&lt;url&gt;</span>
        <span class="nt">&lt;loc&gt;</span>{{ site.url }}{{ page.url }}<span class="nt">&lt;/loc&gt;</span>
        <span class="nt">&lt;lastmod&gt;</span>{{ page.sitemap.lastmod | date_to_xmlschema }}<span class="nt">&lt;/lastmod&gt;</span>
        <span class="nt">&lt;changefreq&gt;</span>{{ page.sitemap.changefreq }}<span class="nt">&lt;/changefreq&gt;</span>
        <span class="nt">&lt;priority&gt;</span>{{ page.sitemap.priority }}<span class="nt">&lt;/priority&gt;</span>
       <span class="nt">&lt;/url&gt;</span>
    {% endif %}
  {% endfor %}
<span class="nt">&lt;/urlset&gt;</span></code></pre></div><p>The <code>{% for post in site.posts %}</code> loops through the posts and finds the pertinent metadata for the sitemap. The same looping method is used for pages, but with a conditional statement to include only the pages with the <code>sitemap</code> variable (and its corresponding values) present.</p><pre><code>---
layout: default
sitemap:
    priority: 0.7
    changefreq: monthly
    lastmod: 2013-03-29T12:49:30-05:00
---
</code></pre><p>The <code>lastmod</code> variable uses the <a href="http://wwp.greenwichmeantime.com/info/iso.htm">ISO format</a>, which allows for YYYY-MM-DD. It’s bit simpler than including the notation for hours, minutes, seconds, and time zone.</p><p>In summary, it’s easy to generate a sitemap.xml for use with Jekyll on GitHub Pages. Thanks again to <a href="https://github.com/havvg">havvg</a> for making available such a great example <a href="https://github.com/havvg/havvg.github.com/blob/master/sitemap.xml">sitemap.xml</a>.</p><div class="gray-box"><p><strong>More Info:</strong> Visit the official <a href="http://www.sitemaps.org/">sitemaps.org</a> to learn more about the protocol.</p></div></div><footer class="entry-meta entry-meta-footer"><div class="entry-meta-suggested-tweet"><h3 class="suggested-tweet-title">Spread the Word</h3><a href="https://twitter.com/intent/tweet?hashtags=Jekyll%2Cjekyllrb%2CSitemap&related=jekyllrb%2Chavvg&text=Generating+a+Sitemap+in+Jekyll+without+a+Plugin+by+%40DavidEnsinger&url=http%3A%2F%2Fdavidensinger.com%2F2013%2F03%2Fgenerating-a-sitemap-in-jekyll-without-a-plugin%2F" class="suggested-tweet-bubble"><span class="suggested-tweet-text">Generating a Sitemap in Jekyll without a Plugin by @DavidEnsinger</span> <span class="suggested-tweet-hashtag">#Jekyll</span> <span class="suggested-tweet-hashtag">#jekyllrb</span> <span class="suggested-tweet-hashtag">#Sitemap</span></a><p class="suggested-tweet-link"><a href="https://twitter.com/intent/tweet?hashtags=Jekyll%2Cjekyllrb%2CSitemap&related=jekyllrb%2Chavvg&text=Generating+a+Sitemap+in+Jekyll+without+a+Plugin+by+%40DavidEnsinger&url=http%3A%2F%2Fdavidensinger.com%2F2013%2F03%2Fgenerating-a-sitemap-in-jekyll-without-a-plugin%2F" class="icon-left icon-twitter">Click to Tweet</a> <small>(you may edit before posting.)</small></p></div><div class="entry-meta-footer-bottom"><span class="icon-left entry-meta-icon icon-tag"><a class="nav-link-tag" href="/tag/jekyll" rel="tag">Jekyll</a>, <a class="nav-link-tag" href="/tag/sitemap" rel="tag">Sitemap</a>, <a class="nav-link-tag" href="/tag/xml" rel="tag">XML</a></span></div></footer></article><nav class="post-navigation clearfix" role="navigation"><h1 class="visuallyhidden">Post navigation</h1><div class="nav-previous"><a class="nav-previous-link" href="http://davidensinger.com/2013/03/setting-the-dns-for-github-pages-on-namecheap/" rel="prev">Setting the DNS for GitHub Pages on Namecheap</a></div><div class="nav-next"><a class="nav-next-link" href="http://davidensinger.com/2013/04/deploying-jekyll-to-github-pages/" rel="next">Deploying Jekyll with Plugins to GitHub Pages</a></div></nav></div><aside class="secondary vcard author clearfix" role="complementary"><img alt="A photo of David Ensinger" class="secondary-photo photo" src="/img/david-ensinger.24b3.jpg"><p>Hi, I’m <strong class="fn">David Ensinger</strong> and I’m a <strong>Front End Developer</strong>. Learn more <a href="/about/" class="url">about me</a>.</p><p>Have a look around and please don’t hesitate to <a href="mailto:hello@davidensinger.com" class="email">contact me</a> with any comments, questions, or just to say hello!</p><a class="icon-left icon-twitter" href="https://twitter.com/intent/user?screen_name=DavidEnsinger" title="Follow @DavidEnsinger on Twitter">Follow me on Twitter</a></aside></div><footer class="site-footer clearfix" role="contentinfo"><ul class="footer-icons"><li class="footer-icon-item"><a class="footer-icon-anchor footer-icon icon-twitter" href="http://twitter.com/DavidEnsinger" title="Follow me on Twitter"><span class="footer-icon-title">Twitter</span></a></li><li class="footer-icon-item"><a class="footer-icon-anchor footer-icon icon-github" href="http://github.com/davidensinger" title="Follow me on GitHub"><span class="footer-icon-title">GitHub</span></a></li><li class="footer-icon-item"><a class="footer-icon-anchor footer-icon icon-tumblr" href="http://www.republicofthespirit.com/" title="Follow me on Tumblr"><span class="footer-icon-title">Tumblr</span></a></li></ul><p>&copy; 2014 David Ensinger. All rights reserved. <a class="link-rss" href="/atom.xml" title="Subscribe to my RSS feed"><span aria-hidden="true" class="icon-blank"></span> <span aria-hidden="true" class="icon-rss"></span> <span class="visuallyhidden">RSS Feed</span></a></p></footer></div></body></html>